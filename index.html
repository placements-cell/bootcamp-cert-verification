<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PGDAV Certificate Verification</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: #f7f7f7;
    text-align: center;
    padding: 40px;
  }
  input, button {
    padding: 10px;
    margin: 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
  button {
    background: #007bff;
    color: white;
    cursor: pointer;
  }
  #result {
    margin-top: 25px;
    font-size: 16px;
  }
</style>
</head>
<body>
<h2>PGDAV Certificate Verification Portal</h2>
<p>Enter your Email or Certificate ID to verify and download your certificate.</p>
<input type="text" id="search" placeholder="Enter your Email or CertCode" size="35">
<button onclick="verifyCertificate()">Verify</button>

<div id="result"></div>

<script>
const DATA_URL = "PASTE_JSON_FILE_LINK_HERE"; // Link from Google Drive (jsonFile.getUrl())

async function verifyCertificate() {
  const query = document.getElementById('search').value.trim().toLowerCase();
  const resultDiv = document.getElementById('result');
  resultDiv.innerHTML = "üîé Searching...";

  try {
    const res = await fetch(DATA_URL);
    const data = await res.json();
    const match = data.find(item =>
      item.email.toLowerCase() === query || item.certCode.toLowerCase() === query
    );

    if (match) {
      resultDiv.innerHTML = `
        ‚úÖ <b>Certificate Verified</b><br>
        Name: ${match.name}<br>
        Issue Date: ${new Date(match.issueDate).toDateString()}<br>
        <a href="${match.fileLink}" target="_blank">üìÑ View Certificate</a><br>
        üîó Hash: ${match.hash.slice(0, 16)}...
      `;
    } else {
      resultDiv.innerHTML = "‚ùå No certificate found for this email or code.";
    }
  } catch (err) {
    resultDiv.innerHTML = "‚ö†Ô∏è Error fetching data.";
  }
}
</script>
</body>
</html>
